<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>목록 - CopyTube</title>

  <!-- CSP (프로젝트 기존 정책과 동일하게 유지) -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    connect-src 'self' https://www.googleapis.com https://firestore.googleapis.com https://securetoken.googleapis.com https://identitytoolkit.googleapis.com https://firebaseinstallations.googleapis.com https://www.gstatic.com https://www.youtube.com;
    img-src 'self' data: https://i.ytimg.com;
    frame-src https://www.youtube.com;
    script-src 'self' https://www.gstatic.com 'unsafe-inline';
    style-src 'self' 'unsafe-inline';
  ">

  <link rel="stylesheet" href="css/style.css"/>

  <style>
    /* 페이지 전용 최소 스타일 (전역 스타일은 건드리지 않습니다) */
    body { padding-top: 72px; background: var(--bg, #000); color: var(--fg, #fff); }
    main { max-width: 1100px; margin: 0 auto; padding: 0 16px 40px; }

    .toolbar { display:flex; align-items:center; gap:8px; flex-wrap:wrap; margin:10px 0 14px; }
    .toolbar .msg { color: var(--muted, #9aa0a6); font-size:13px; margin-left:auto; }

    .search-box { display:flex; gap:6px; flex:1 1 420px; }
    .search-box input {
      flex:1; min-width: 200px; height: 36px; padding: 0 10px;
      background: var(--bg-2, #111); color: var(--fg, #fff); border:1px solid var(--border, #333); border-radius: 8px;
    }
    .btn { height: 36px; padding: 0 12px; border-radius: 8px; border:1px solid var(--border, #333); background: var(--bg-2, #111); color: var(--fg, #fff); }
    .btn:active { transform: translateY(1px); }

    /* 카드 2열 그리드 (목록1.3 취향 반영: 여백 컴팩트) */
    .cards { display:flex; flex-direction:column; gap:8px; }
    .card {
      display:grid; grid-template-columns: 1fr 160px; gap:10px;
      background: var(--bg-2, #111); border:1px solid var(--border, #333); border-radius:12px;
      padding:8px;
    }
    .card .left { display:grid; grid-template-rows:auto auto auto; gap:6px; min-width:0; }
    .title {
      font-size:16px; font-weight:700; line-height:1.25; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;
    }
    .url { font-size:12px; color: var(--muted, #9aa0a6); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
    .chips { display:flex; flex-wrap:wrap; gap:4px; }
    .chip { border:1px solid #2a2a2a; border-radius:999px; padding:2px 8px; font-size:12px; color:#ddd; }

    .thumb-wrap { width:100%; aspect-ratio: 16 / 9; overflow:hidden; border-radius:8px; background: #222; }
    .thumb { width:100%; height:100%; object-fit:cover; display:block; cursor:pointer; }

    @media (max-width: 520px) {
      .card { grid-template-columns: 1fr; }
      .thumb-wrap { order: 3; } /* 썸네일이 아래쪽으로 */
    }

    /* 슬라이드 유틸 (있으면 사용, 없으면 여기서 제공) */
    .slide-in-right { animation: sir 240ms ease-out both; }
    .slide-in-left  { animation: sil 240ms ease-out both; }
    @keyframes sir { from { transform: translateX(16px); opacity:0; } to { transform:none; opacity:1; } }
    @keyframes sil { from { transform: translateX(-16px); opacity:0; } to { transform:none; opacity:1; } }
  </style>
</head>
<body>
  <!-- 상단바는 프로젝트 공통 헤더를 그대로 사용(별도 수정/복원 없음) -->

  <main>
    <h2 style="display:flex;align-items:center;gap:10px;margin:0 0 8px;">
      영상 목록
      <span class="badge" style="font-size:12px;color:#9ef01a;font-weight:700;">읽기 전용</span>
    </h2>

    <div class="toolbar">
      <div class="search-box">
        <input id="q" type="text" placeholder="제목 또는 URL 검색"/>
        <button class="btn" id="btnSearch">검색</button>
        <button class="btn" id="btnClear" title="검색어 지우기">지우기</button>
      </div>
      <div class="msg" id="resultMsg">불러오는 중…</div>
    </div>

    <div id="cards" class="cards slide-in-right" aria-live="polite"></div>

    <div style="display:flex;justify-content:center;margin-top:12px;">
      <button class="btn" id="btnMore" style="display:none;">더 보기</button>
    </div>
  </main>

  <!-- Firebase & App scripts -->
  <script type="module" src="js/list.js"></script>
</body>
</html>
